@page "/"
@namespace BlazorApp2Test.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

<component type="typeof(App)" render-mode="ServerPrerendered" />

<script>

    window.copyToClipboard = function (text) {

        if (navigator.clipboard) {

            copyToClipboard = (text) => {

                try{

                    navigator.clipboard.writeText(text);
                    console.log("Get in navi");

                }catch (ex){

                    console.warn("Copy to clipbaord error: ", ex);
                    return false;
                }
            };

        } else {

            copyToClipboard = (text) => {

                try {

                    console.log("Get in manual");
                    const input = document.createElement('input');
                    console.log("Done create input");
                    input.setAttribute('value', text);
                    console.log("Done set attribute");
                    document.body.appendChild(input);
                    console.log("Done append child");
                    input.select();
                    console.log("Done select");
                    document.execCommand('copy');
                    console.log("Done exeCommand");
                    document.body.removeChild(input);
                    console.log("Done remove");
                } catch (ex) {

                    console.log("Get in catch");
                    console.warn("Copy to clipboard failed.", ex);
                    return false;
                }
                finally {

                    console.log("Get in finally");
                    document.body.removeChild(input);
                }
            }
        }
        copyToClipboard(text);
    }

    window.showModal = function (modalId) {
        $('#' + modalId).modal('show');
    }

    window.hideModal = function (modalId) {
        $('#' + modalId).modal('hide');
    }

   window.previewImage = function (inputElem, imgElem) {
      const url = URL.createObjectURL(inputElem.files[0]);
      imgElem.addEventListener('load', () => URL.revokeObjectURL(url), { once: true });
      imgElem.src = url;
   }

</script>
